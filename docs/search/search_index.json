{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Python Prep Line (PyPL)","text":"<p>An open source, open hardware, automated preparation line for processing geochemical samples. Originally designed for CO<sub>2</sub> samples, but should handle anything which requires:</p> <ul> <li>switching relays, valves or heating elements</li> <li>monitoring temperature sensors (e.g., thermocouples or RTD sensors)</li> <li>monitoring MKS vacuum/pressure gauges.</li> <li>controlling stepper motors</li> </ul> <p>The user interface runs on a raspberry pi computer but this computer may be switched off or unplugged without affecting automated processes, which remain running on an independent microcontroller which handles lower-level interaction with sensors and various electronic components.</p> <p>Modifying hardware configuration and sample preparation protocols is easily done using Python (on the computer) and MicroPython (on the microcontroller).</p>"},{"location":"#contributors","title":"Contributors","text":"<p>Originally created by Mathieu Da\u00ebron, with advice, contributions and feedback from Samir Kassi, Arnaud Dapoigny, and Justin Chaillot.</p>"},{"location":"1-general-overview/","title":"General overview","text":""},{"location":"2-hardware/","title":"Hardware components","text":""},{"location":"2-hardware/#motherboard","title":"Motherboard","text":"<p>A custom PCB connects the pyboard microcontroller running micropython to the other electronic components, with the following inputs/outputs:</p> <ul> <li>fuse-protected DC input (typically 9-24 VDC)</li> <li>USB input/output</li> <li>4 general-purpose inputs/outputs (GPIO labeled <code>X21</code>, <code>X22</code>, <code>A13</code>, <code>A14</code>) which may be used  for basic two-way communication with external systems (e.g, a mass spectrometer)</li> <li>4 D-SUB connectors for RS-232 communication</li> <li>6 screw terminal groups for temperature sensors</li> <li>38 terminal groups for DC relays, six of which can be configured for pulse-width modulation (PWM) operation and are thus well-suited for PID control</li> <li>2 bipolar stepper motor drivers</li> </ul>"},{"location":"2-hardware/#pyboard","title":"Pyboard","text":"<p>The brains of the operation is a pyboard (v.1.1, documentation here), based on a 168\u00a0MHz Cortex M4 CPU.</p> <p>Note that the maximum total current out of the 3.3V output pins of the pyboard is 250\u00a0mA (see here for a more complete discussion).</p>"},{"location":"2-hardware/#stepper-motor-driver-boards","title":"Stepper Motor Driver Boards","text":"<p>We use a breakout board for the MPS MP6500 microstepping bipolar stepper motor driver from Pololu (docs here). Rotating the motor is achieved by repeatedly switching the STEP pin between high and low. The motherboard is configured by default for 1/8 step resolution (pins MS1 and MS2 high, i.e. set to +3.3\u00a0V), but full steps, half-steps and quarter-steps can be selected using different MS1 and MS2 settings, either by modifying the motherboard or by tinkering with the stepper driver board.</p> <p>These driver boards work well but are easy to fry when mishandled. Never connect or disconnect motor wires while the driver board is powered.</p>"},{"location":"2-hardware/#temperature-readings","title":"Temperature Readings","text":"<p>Up to 4 independent temperature reading. Each reading may come from either:</p> <ul> <li>a thermocouple connected to a MAX31856 chip</li> <li>a resistance temperature detector (PT1000 or PT100) connected to a MAX31865 chip</li> </ul>"},{"location":"2-hardware/#thermocouple-board","title":"Thermocouple Board","text":"<ul> <li>Adafruit 3263</li> <li>Based on MAX31856</li> <li>Configured for continuous readings and no averaging; with these settings the IC automatically measures T every 100\u00a0ms or so (82\u00a0ms in our tests) with measurement noise on the order of 0.05\u00a0\u00b0C.</li> <li>Reading the latest measurements using SPI is much faster (only about 0.14\u00a0ms when tested using a baudrate of 1e7).</li> <li>Maximum current used by each MAX31856 is 2\u00a0mA.</li> </ul>"},{"location":"2-hardware/#pt1000-board","title":"PT1000 Board","text":"<ul> <li>Adafruit 3328</li> <li>Based on MAX31865</li> </ul>"},{"location":"2-hardware/#thermocouples-type-k","title":"Thermocouples (type K)","text":"<ul> <li>Supplier: https://www.prosensor.fr</li> <li>Part #: K4051000-2-1/TEF</li> <li>OD = 0.5 mm</li> <li>L = 1 m</li> </ul>"},{"location":"2-hardware/#resistance-temperature-detectors-pt1000","title":"Resistance Temperature Detectors  (PT1000)","text":""},{"location":"2-hardware/#heating-elements","title":"Heating Elements","text":"<ul> <li>Supplier: https://www.prosensor.fr</li> <li>Part #: CCHC-1/4-11/4-300-0 or CCHC-6.5-30-300-0</li> <li>300 W at 230 VAC</li> <li>OD = 6.35 mm or 6.5 mm</li> <li>L = 31.75 mm or 30 mm</li> </ul> <p>These relays are powered by 230 VAC and should thus only be switched using dedicated optocoupler relays (see below). </p>"},{"location":"2-hardware/#pressure-readings","title":"Pressure Readings","text":""},{"location":"2-hardware/#micropirani-and-dualtrans-vacuumpressure-gauges","title":"MicroPirani and DualTrans Vacuum/Pressure Gauges","text":"<ul> <li>Part #: MKS 925</li> <li>Part #: MKS 910</li> <li>Communicates through an RS-232 serial connection</li> </ul>"},{"location":"2-hardware/#rs232-ttl-transceiver-board","title":"RS232 / TTL Transceiver Board","text":"<p>Converts TTL (Transistor-Transistor Logic) signals to and from RS-232 signals</p> <ul> <li>SparkFun Transceiver Breakout (BOB-11189)</li> <li>Based on MAX3232</li> </ul> <p></p>"},{"location":"2-hardware/#relays","title":"Relays","text":"<p>The pyboard communicates through I2C with a GPIO expansion board based on the MCP23017 chip, providing access to 16 input or output ports. Each of these ports is connected to a power MOSFET, providing the ability to quickly switch DC power to 16 screw terminals.</p>"},{"location":"2-hardware/#171-gpio-expansion-board","title":"1.7.1 \u2013 GPIO Expansion Board","text":"<ul> <li>Based on MCP23017</li> <li>All ports are pulled low (connected to ground by 10K resistors).</li> <li>As a result, all switches are off by default.</li> </ul>"},{"location":"2-hardware/#power-mosfetss","title":"Power MOSFETSs","text":"<p>Used to connect screw terminals to ground safely and quickly. This means that when the MOSFET is off, whatever is connected to the screw terminals will float at a moderately high DC voltage (e.g., 24\u00a0VDC) despite being powered off, so any electrical connections should be suitably insulated.</p>"},{"location":"2-hardware/#optocoupler-relays","title":"Optocoupler relays","text":""},{"location":"2-hardware/#power-supply","title":"Power Supply","text":""},{"location":"3-bare-metal-software/","title":"Bare-metal software","text":""},{"location":"4-gui-side-software/","title":"GUI-side software","text":""},{"location":"license/","title":"License","text":""}]}